<!-- ================= DASHBOARD SHELL ================= -->
<div class="dashboard-wrapper">
  <div class="container">
    <!-- ===== Page header ===== -->
    <div
      class="header-section d-flex justify-content-between align-items-center mb-4"
    >
      <div>
        <h2 class="dashboard-title fw-bold mb-1">My Dashboard</h2>
        <p class="text-muted mb-0">
          Welcome back, here is your application overview.
        </p>
      </div>

      <!-- Primary CTA -->
      <button class="btn btn-find-jobs px-4 py-2" routerLink="/jobs">
        + Find Jobs
      </button>
    </div>

    <!-- ===== Stats summary ===== -->
    <app-dashboard-stats></app-dashboard-stats>

    <!-- ===== Main content ===== -->
    <div class="row mt-4 g-4">
      <!-- LEFT: Application History -->
      <div class="col-12 col-lg-8">
        <app-application-list></app-application-list>
      </div>

      <!-- RIGHT: Recent Jobs -->
      <div class="col-12 col-lg-4">
        <div class="card-custom p-4">
          <!-- Section header -->
          <div class="position-relative mb-3">
            <h5 class="fw-bold mb-0">Recent Jobs</h5>

            <a
              routerLink="/jobs"
              class="link-view-all position-absolute top-50 end-0 translate-middle-y"
            >
              View all jobs ‚Üí
            </a>
          </div>

          <!-- Loading state -->
          @if (loadingJobs) {
          <div class="text-center py-4 text-muted">Loading...</div>
          }

          <!-- Empty state -->
          @if (!loadingJobs && recentJobs.length === 0) {
          <div class="text-muted">No recent jobs found.</div>
          }

          <!-- Recent job cards -->
          @if (!loadingJobs && recentJobs.length > 0) {
          <div class="d-grid gap-3">
            @for (job of recentJobs.slice(0, 2); track job.id ?? $index) {
            <article class="card featured-job-card job-card-compact">
              <div class="card-body d-flex flex-column">
                <div class="d-flex align-items-center">
                  <!-- Job info -->
                  <div class="flex-grow-1">
                    <h6 class="job-card-title mb-1">
                      {{ job.title || job.job_title || "Untitled Role" }}
                    </h6>

                    <div class="d-flex flex-column gap-0">
                      <div
                        class="job-card-meta d-flex align-items-center gap-2"
                      >
                        <span class="badge job-type-badge">
                          {{ job.job_type || job.type || "Remote" }}
                        </span>
                        <span class="text-muted small">
                          üí∞
                          {{
                            job.salary || job.salary_range || "Not Disclosed"
                          }}
                        </span>
                      </div>

                      <div class="job-card-location text-muted small">
                        üìç
                        {{
                          job.candidate_required_location ||
                            job.location ||
                            "Remote"
                        }}
                      </div>
                    </div>
                  </div>

                  <!-- CTA -->
                  <div class="job-card-actions ms-3">
                    <button
                      class="btn btn-secondary-purple btn-sm rounded-pill px-3"
                      (click)="applyFromRecent(job)"
                    >
                      Apply
                    </button>
                  </div>
                </div>
              </div>
            </article>
            }
          </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
